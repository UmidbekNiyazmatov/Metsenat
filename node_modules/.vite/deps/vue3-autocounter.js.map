{
  "version": 3,
  "sources": ["../../vue3-autocounter/dist/vue3-autocounter.esm.js"],
  "sourcesContent": ["import { defineComponent, openBlock, createElementBlock, toDisplayString } from 'vue';\r\n\r\nvar script = defineComponent({\r\n  name: \"Vue3Autocounter\",\r\n  interval: null,\r\n  props: {\r\n    startAmount: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    endAmount: {\r\n      type: Number,\r\n      default: 0,\r\n      required: true\r\n    },\r\n    duration: {\r\n      type: Number,\r\n      default: 3,\r\n      validator(duration) {\r\n        return duration > 0;\r\n      }\r\n    },\r\n    autoinit: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    prefix: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    suffix: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    separator: {\r\n      type: String,\r\n      default: ','\r\n    },\r\n    decimalSeparator: {\r\n      type: String,\r\n      default: '.'\r\n    },\r\n    decimals: {\r\n      type: Number,\r\n      default: 0,\r\n      validator(decimals) {\r\n        return decimals >= 0;\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      timestamp: 0,\r\n      startTimestamp: 0,\r\n      currentAmount: 0,\r\n      currentStartAmount: 0,\r\n      currentDuration: 0,\r\n      paused: false,\r\n      remaining: 0,\r\n      animationFrame: 0\r\n    };\r\n  },\r\n  mounted() {\r\n    this.currentAmount = this.startAmount;\r\n    this.currentStartAmount = this.startAmount;\r\n    this.currentDuration = this.duration * 1000;\r\n    this.remaining = this.duration * 1000;\r\n    if (this.autoinit) this.start();else this.paused = true;\r\n    this.$emit('mounted');\r\n  },\r\n  unmounted() {\r\n    this.cancelAnimation();\r\n  },\r\n  watch: {\r\n    startAmount() {\r\n      this.reset();\r\n    },\r\n    endAmount() {\r\n      this.reset();\r\n    },\r\n    duration() {\r\n      this.reset();\r\n    }\r\n  },\r\n  computed: {\r\n    isCountingUp() {\r\n      return this.endAmount > this.startAmount;\r\n    },\r\n    displayedAmount() {\r\n      return `${this.prefix}${this.formatedAmount}${this.suffix}`;\r\n    },\r\n    formatedAmount() {\r\n      const regex = /(\\d+)(\\d{3})/;\r\n      let numberString = this.currentAmount.toFixed(this.decimals);\r\n      numberString += '';\r\n      let numberArray = numberString.split('.');\r\n      let numbers = numberArray[0];\r\n      let decimals = numberArray.length > 1 ? this.decimalSeparator + numberArray[1] : '';\r\n      let isNumber = !isNaN(parseFloat(this.separator));\r\n      if (this.separator && !isNumber) {\r\n        while (regex.test(numbers)) numbers = numbers.replace(regex, '$1' + this.separator + '$2');\r\n      }\r\n      return numbers + decimals;\r\n    }\r\n  },\r\n  methods: {\r\n    start() {\r\n      this.cancelAnimation();\r\n      this.currentStartAmount = this.startAmount;\r\n      this.startTimestamp = null;\r\n      this.currentDuration = this.duration * 1000;\r\n      this.paused = false;\r\n      this.animationFrame = window.requestAnimationFrame(this.counting);\r\n    },\r\n    pause() {\r\n      if (this.paused) return;\r\n      this.cancelAnimation();\r\n      this.paused = true;\r\n    },\r\n    resume() {\r\n      if (!this.paused) return;\r\n      this.startTimestamp = null;\r\n      this.currentDuration = +this.remaining;\r\n      this.currentStartAmount = +this.currentAmount;\r\n      this.animationFrame = window.requestAnimationFrame(this.counting);\r\n      this.paused = false;\r\n    },\r\n    reset() {\r\n      this.paused = false;\r\n      this.startTimestamp = null;\r\n      this.cancelAnimation();\r\n      this.currentAmount = this.startAmount;\r\n      if (this.autoinit) this.start();else this.paused = true;\r\n    },\r\n    counting(timestamp) {\r\n      this.timestamp = timestamp;\r\n      if (!this.startTimestamp) this.startTimestamp = timestamp;\r\n      let progress = timestamp - this.startTimestamp;\r\n      this.remaining = this.currentDuration - progress;\r\n      if (!this.isCountingUp) {\r\n        this.currentAmount = this.currentStartAmount - (this.currentStartAmount - this.endAmount) * (progress / this.currentDuration);\r\n        this.currentAmount = this.currentAmount < this.endAmount ? this.endAmount : this.currentAmount;\r\n      } else {\r\n        this.currentAmount = this.currentStartAmount + (this.endAmount - this.currentStartAmount) * (progress / this.currentDuration);\r\n        this.currentAmount = this.currentAmount > this.endAmount ? this.endAmount : this.currentAmount;\r\n      }\r\n      if (progress < this.currentDuration) this.animationFrame = window.requestAnimationFrame(this.counting);else this.$emit('finished');\r\n    },\r\n    cancelAnimation() {\r\n      if (this.animationFrame) window.cancelAnimationFrame(this.animationFrame);\r\n    }\r\n  }\r\n});\r\n\r\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\r\n  return openBlock(), createElementBlock(\"span\", null, toDisplayString(_ctx.displayedAmount), 1);\r\n}\r\n\r\nscript.render = render;\r\n\r\n// Import vue component\r\n\r\n// Define typescript interfaces for installable component\r\n\r\n// Default export is installable instance of component.\r\n// IIFE injects install function into component, allowing component\r\n// to be registered via Vue.use() as well as Vue.component(),\r\nvar entry_esm = /*#__PURE__*/(() => {\r\n  // Assign InstallableComponent type\r\n  const installable = script;\r\n\r\n  // Attach install function executed by Vue.use()\r\n  installable.install = app => {\r\n    app.component('Vue3Autocounter', installable);\r\n  };\r\n  return installable;\r\n})();\r\n\r\n// It's possible to expose named exports when writing components that can\r\n// also be used as directives, etc. - eg. import { RollupDemoDirective } from 'rollup-demo';\r\n// export const RollupDemoDirective = directive;\r\n\r\nexport { entry_esm as default };\r\n"],
  "mappings": "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",
  "names": []
}
